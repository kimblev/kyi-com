uuid: f87e4aaf-08a2-418a-8a2a-9a945931a440
langcode: en
status: true
dependencies: {  }
id: upgrade_commerce1_order
class: Drupal\commerce_migrate_commerce\Plugin\migrate\Order
field_plugin_method: null
cck_plugin_method: null
migration_tags:
  - 'Drupal 7'
  - Commerce
  - Content
migration_group: migrate_drupal_7
label: 'Commerce order'
source:
  plugin: commerce1_order
process:
  order_id:
    -
      plugin: get
      source: order_id
  order_number:
    -
      plugin: get
      source: order_number
  revision_id:
    -
      plugin: get
      source: revision_id
  type:
    -
      plugin: static_map
      source: type
      default_value: default
      map:
        commerce_order: default
  uid:
    -
      plugin: get
      source: uid
  ip_address:
    -
      plugin: get
      source: hostname
  state:
    -
      plugin: static_map
      source: status
      map:
        checkout_checkout: draft
        checkout_review: draft
        checkout_payment: draft
        checkout_complete: draft
        cart: draft
        canceled: canceled
        pending: completed
        processing: completed
        completed: completed
  cart:
    -
      plugin: static_map
      source: status
      default_value: false
      map:
        cart: true
  created:
    -
      plugin: get
      source: created
  changed:
    -
      plugin: get
      source: changed
  placed:
    -
      plugin: skip_on_value
      method: process
      source: '@state'
      value:
        - draft
        - cancelled
    -
      plugin: get
      source: created
  completed:
    -
      plugin: skip_on_value
      method: process
      not_equals: true
      source: '@state'
      value: completed
    -
      plugin: get
      source: changed
  mail:
    -
      plugin: get
      source: mail
  data/refresh_state:
    -
      plugin: get
      source: refresh_state
  store_id:
    -
      plugin: default_value
      source: default_store_id
      default_value: 1
  adjustments:
    -
      plugin: commerce1_order_adjustment_shipping
      source: shipping_line_items
    -
      plugin: commerce_adjustments
  field_metatag:
    -
      plugin: d7_metatag_entities
      source: pseudo_metatag_entities
  order_items:
    -
      plugin: migration_lookup
      migration: upgrade_commerce1_order_item_product
      source: commerce_line_items
      no_stub: true
    -
      plugin: skip_on_empty
      method: process
  total_price:
    -
      plugin: commerce1_migrate_commerce_price
      source: commerce_order_total
  billing_profile:
    -
      plugin: commerce_migrate_commerce_reference_revision
      migration: commerce1_profile
      source: commerce_customer_billing
      no_stub: true
  commerce_discounts:
    -
      plugin: get
      source: commerce_discounts
  commerce_coupons:
    -
      plugin: get
      source: commerce_coupons
  field_affiliate_code:
    -
      plugin: get
      source: field_affiliate_code
  field_full_name:
    -
      plugin: get
      source: field_full_name
  field_city_shipping:
    -
      plugin: get
      source: field_city_shipping
  field_state_shipping:
    -
      plugin: get
      source: field_state_shipping
  field_zip_code_shipping:
    -
      plugin: get
      source: field_zip_code_shipping
  field_address_one:
    -
      plugin: get
      source: field_address_one
  field_address_two:
    -
      plugin: get
      source: field_address_two
destination:
  plugin: 'entity:commerce_order'
  destination_module: commerce_order
migration_dependencies:
  required:
    - upgrade_commerce1_order_item_product
    - upgrade_commerce1_profile_billing
  optional:
    - upgrade_d7_field_instance
    - upgrade_d7_metatag_field
    - upgrade_d7_metatag_field_instance
    - upgrade_commerce1_order_item_product
